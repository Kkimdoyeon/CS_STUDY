# 교착상태 ( Deadlock )

교착상태란 프로세스가 자원을 얻지 못해 다음 처리를 하지 못하는 상태로, Deadlock 이라고도 하며 <br>
시스템적으로 한정된 자원을 여러 곳에서 사용하려고 할 때 발생한다. <br>


![image](https://github.com/dlrkdus/CS_STUDY/assets/99721126/41cf5357-a58d-465f-bd1b-92a082ce1745)

예를 들어 다음과 같은 멀티 프로세싱 환경에서 프로세스 P1과 P2가 각각 자원1,2를 필요로 할 때 <br>
P1은 자원1을 사용중이고 P2는 자원2를 사용중이다. <br>
그럼 P1은 자원2를 기다리고 P2는 자원1을 기다리지만 각각 할당돼있는 상태기 때문에 프로세스는 무한대기에 빠진다. <br>

교착상태는 특히 멀티 프로그래밍 환경에서 자주 발생한다. <br>
즉 **대기 상태로 들어간 프로세스들이 자원을 점유할 수 없어 실행 상태로 변경 될 수 없을 때** 교착 상태가 발생한다. <br>

## 해결 방법

교착 상태는 다음 4가지 조건이 동시에 성립할 때 발생한다. <br>

- 상호 배제 (Mutual Exclusion)
- 점유 대기 (Hold and Wait)
- 비선점 (No preemption)
- 순환 대기 (Circular wait)

그 말은 즉, 한 가지 문제라도 발생을 저지하면 교착상태는 **예방**할 수 있다는 것이다. <br>

- 상호 배제 부정
  - 여러 프로세스가 동시에 공유 자원을 사용할 수 있음
- 점유 대기 부정
  - 프로세스가 실행되기 전에 필요한 모든 자원을 할당하여 프로세스 대기를 없애거나, 자원이 점유되지 않은 상태에서만 자원 요청을 받도록 함
- 비선점 부정
  - 모든 자원에 대한 선점을 허용
- 순환 대기 부정
  - 자원을 선형으로 분류하여 고유 번호를 할당하고, 각 프로세스는 현재 점유한 자원의 고유번호보다 앞이나 뒤 한쪽 방향으로만 자원을 요구하도록 함
 
또 교착상태를 **회피**하기 위해 교착상태가 발생할 가능성이 있다면 자원할당을 하지 않고 안전한 상태에서만 자원요청을 받기도 한다. <br> 
회피를 하기 위해선 다음 4가지 가정이 필요하다. 

- 프로세스 수 고정
- 자원의 종류와 수 고정
- 프로세스가 요구하는 최대 자원의 수를 알아야 함
- 프로세스는 자원 사용 후 반드시 반납

## 회피 알고리즘 

회피 알고리즘은 크게 4가지가 있다. 

- 은행원 알고리즘
- 자원 할당 그래프 알고리즘
- 탐지
- 회복


